<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>GPA Table</title>
    <style>
      table,
      th,
      td {
        border: 1px solid black;

        padding: 8px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <script>
      const data = [
        { reg: "04072213041", name: "Ahmad", gpa: 3.9 },
        { reg: "04072213042", name: "zain", gpa: 3.8 },
        { reg: "04072213043", name: "asjad", gpa: 3.7 },
        { reg: "0407221303", name: "ali", gpa: 3.6 },
      ];

      const table = document.createElement("table");

      const headerRow = document.createElement("tr");

      const Header_data = ["Registration", "Name", "GPA"];
      Header_data.forEach((text) => {
        const th = document.createElement("th");
        th.textContent = text;
        headerRow.appendChild(th);
      });
      table.appendChild(headerRow);

      data.forEach((content) => {
        const row = document.createElement("tr");

        const tdRegistration = document.createElement("td");
        tdRegistration.textContent = content.reg;
        row.appendChild(tdRegistration);

        const tdName = document.createElement("td");
        tdName.textContent = content.name;
        row.appendChild(tdName);

        const tdGpa = document.createElement("td");
        tdGpa.textContent = content.gpa;
        row.appendChild(tdGpa);
        table.appendChild(row);
      });

      const avgRow = document.createElement("tr");
      for (let i = 0; i < 3; i++) {
        const td = document.createElement("td");
        td.textContent = "";
        avgRow.appendChild(td);
      }

      avgRow.addEventListener("click", () => {
        const avg = data.reduce((sum, item) => sum + item.gpa, 0) / data.length;
        avgRow.cells[0].textContent = "Average GPA";
        avgRow.cells[1].textContent = "";
        avgRow.cells[2].textContent = avg.toFixed(2);
      });

      table.appendChild(avgRow);

      // Add table to the body
      document.body.appendChild(table);
    </script>
  </body>
</html>
